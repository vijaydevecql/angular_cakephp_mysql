angular.module("PlPush",["ngCordova"]);
!function(){"use strict";angular.module("PlPush").factory("LocalDataSrv",function(){var e=function(e){delete window.localStorage[e]},t=function(e){return localStorage.getItem(e)},o=function(e){return!!localStorage.getItem(e)},n=function(e,t){localStorage.setItem(e,t)};return{setKey:n,getKey:t,isKeySet:o,eraseKey:e}})}();
!function(){"use strict";function n(){function n(){this.getGcmSenderId=function(){return t},this.getLocalStorageKey=function(){return e}}var t=null,e="plPush.pushToken";this.setGcmSenderId=function(n){t=n},this.setLocalStorageKey=function(n){e=n},this.$get=function(){return new n}}angular.module("PlPush").provider("PushConfig",n)}();
!function(){"use strict";function e(e,n,o,t){function i(e){n.setKey(o.getLocalStorageKey(),e)}function r(){return n.getKey(o.getLocalStorageKey(),"")}function c(n){e.$on("$cordovaPush:notificationReceived",function(e,o){ionic.Platform.isAndroid()&&a(e,o),n(o)})}function s(e,n){return g=e,f=n,document.addEventListener("deviceready",function(){ionic.Platform.isAndroid()&&d(),ionic.Platform.isIOS()&&u()}),this}function u(){var e={badge:!0,sound:!0,alert:!0};t.register(e).then(function(e){i(e),void 0!==g&&g({source:"ios",token:e})},function(e){void 0!==f&&f(e),console.log("Registration error on IOS: ",e)})}function d(){var e={senderID:l};t.register(e).then(function(e){console.log("Registration requested!")},function(e){console.log("Error registering on Android",e)})}function a(e,n){"registered"===n.event&&n.regid.length>0&&(i(n.regid),void 0!==g&&g({source:"android",token:n.regid}))}var g,f,l=o.getGcmSenderId(),v={ensureRegistration:s,getToken:r,onMessage:c};return v}angular.module("PlPush").service("PushSrv",e),e.$inject=["$rootScope","LocalDataSrv","PushConfig","$cordovaPush"]}();